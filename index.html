<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mildred Movie Experience</title>

<style>
body{
    margin:0;
    font-family:Arial;
    overflow:hidden;
    background:black;
    color:white;
}

/* SCREENS */
.screen{
    position:absolute;
    width:100%;
    height:100%;
    display:none;
    justify-content:center;
    align-items:center;
    flex-direction:column;
}

/* INTRO */
#intro{
    display:flex;
    font-size:40px;
    animation:fade 4s forwards;
}

@keyframes fade{
    0%{opacity:0;}
    100%{opacity:1;}
}

/* GAME BUTTON */
#gameBtn{
    position:absolute;
    padding:15px 25px;
    border-radius:20px;
    border:none;
    cursor:pointer;
}

/* CHAT */
#chatBox{
    width:80%;
    max-width:400px;
    background:#222;
    padding:20px;
    border-radius:15px;
}

/* STAR SKY */
#stars{
    position:absolute;
    width:100%;
    height:100%;
    background:black;
}

.star{
    position:absolute;
    width:2px;
    height:2px;
    background:white;
}

img{
    width:250px;
    border-radius:20px;
}
</style>
</head>

<body>

<!-- INTRO MOVIE -->
<div id="intro" class="screen" style="display:flex;">
ðŸŽ¬ A Mildred Production Presents...
</div>

<!-- GAME SCREEN -->
<div id="game" class="screen">
<h2>Level 1: Catch The Button ðŸŽ®</h2>
<button id="gameBtn">Catch Me</button>
<h3 id="score">Score: 0</h3>
</div>

<!-- CHATBOT -->
<div id="chat" class="screen">
<div id="chatBox">
<p id="chatText">Hello Mildred ðŸ˜Š</p>
<button onclick="nextChat()">Next</button>
</div>
</div>

<!-- PHOTO -->
<div id="photoScreen" class="screen">
<h2>Hidden Memory ðŸ“¸</h2>
<img src="mildred.jpg">
<button onclick="ending()">Continue</button>
</div>

<!-- ENDING -->
<div id="ending" class="screen">
<div id="stars"></div>
<h1>âœ¨ I made this whole experience just to make you smile ðŸ’– âœ¨</h1>
</div>

<audio id="music" autoplay loop>
<source src="perfect.mp3">
</audio>

<script>

// SCREEN CONTROL
function show(screen){
    document.querySelectorAll(".screen").forEach(s=>s.style.display="none");
    document.getElementById(screen).style.display="flex";
}

// INTRO SEQUENCE
setTimeout(()=>show("game"),4000);

// GAME LEVELS
let score=0;
let btn=document.getElementById("gameBtn");

moveBtn();

function moveBtn(){
    btn.style.top=Math.random()*80+"%";
    btn.style.left=Math.random()*80+"%";
}

btn.onclick=function(){
    score++;
    document.getElementById("score").innerHTML="Score: "+score;
    moveBtn();

    if(score==5){
        show("chat");
    }
};

// CHATBOT FLOW
let chatIndex=0;
let chats=[
"Hi Mildred ðŸ˜Š",
"I built this little game for you",
"Youâ€™re actually pretty amazing ðŸ˜„",
"I hope this made you smile",
"Ready for the next surprise?"
];

function nextChat(){
    chatIndex++;
    if(chatIndex<chats.length){
        document.getElementById("chatText").innerHTML=chats[chatIndex];
    }
    else{
        show("photoScreen");
    }
}

// ENDING WITH MUSIC FADE + STARS
function ending(){

    show("ending");

    // MUSIC FADE
    let music=document.getElementById("music");
    let fade=setInterval(()=>{
        if(music.volume>0.05){
            music.volume-=0.05;
        }
        else{
            clearInterval(fade);
        }
    },300);

    // STAR SKY
    for(let i=0;i<150;i++){
        let star=document.createElement("div");
        star.classList.add("star");

        star.style.top=Math.random()*100+"%";
        star.style.left=Math.random()*100+"%";

        document.getElementById("stars").appendChild(star);
    }
}

// SWIPE NAVIGATION
let startX=0;

document.addEventListener("touchstart",e=>{
    startX=e.touches[0].clientX;
});

document.addEventListener("touchend",e=>{
    let endX=e.changedTouches[0].clientX;

    if(endX-startX>100){
        show("game");
    }
});

</script>

</body>
</html>
